drop table IF EXISTS RATING_MPA CASCADE;
drop table IF EXISTS FILM_GENRES CASCADE;
drop table IF EXISTS FILM_LIKES CASCADE;
drop table IF EXISTS FILMS CASCADE;
drop table IF EXISTS GENRES CASCADE;
drop table IF EXISTS USERS CASCADE;
drop table IF EXISTS FRIENDSHIP CASCADE;


create TABLE RATING_MPA  (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	NAME varchar(250) NOT NULL
);

create TABLE FILMS (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	NAME varchar(250) NOT NULL,
	RATING_ID INTEGER NOT NULL references RATING_MPA(id),
	RELEASE_DATE DATE,
	DESCRIPTION varchar(250),
	DURATION INTEGER
);

create TABLE GENRES (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	NAME varchar(250) NOT NULL
);

create TABLE FILM_GENRES (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	FILM_ID INTEGER NOT NULL references FILMS(id),
	GENRE_ID INTEGER NOT NULL references GENRES(id)
);

create TABLE USERS (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	LOGIN varchar(50) NOT NULL,
	NAME varchar(250),
	BIRTHDAY DATE,
	EMAIL varchar(50) NOT NULL
);

create TABLE FRIENDSHIP (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	USER_ID INTEGER NOT NULL references USERS(id),
	FRIEND_ID INTEGER NOT NULL references USERS(id)
);

create TABLE FILM_LIKES (
	ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	FILM_ID INTEGER NOT NULL references FILMS(id),
	USER_ID INTEGER NOT NULL references USERS(id)
);

insert into RATING_MPA (NAME) values ('G');
insert into RATING_MPA (NAME) values ('PG');
insert into RATING_MPA (NAME) values ('PG-13');
insert into RATING_MPA (NAME) values ('R');
insert into RATING_MPA (NAME) values ('NC-17');

insert into GENRES (NAME) values ('Комедия');
insert into GENRES (NAME) values ('Драма');
insert into GENRES (NAME) values ('Мультфильм');
insert into GENRES (NAME) values ('Триллер');
insert into GENRES (NAME) values ('Документальный');
insert into GENRES (NAME) values ('Боевик');





